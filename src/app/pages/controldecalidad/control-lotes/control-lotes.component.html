<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-body">
        <form autocomplete="off" [formGroup]="FormControlLotes" (submit)="Filtrar()">

          <div class="row justify-content-start">
            <div class="col-md-3">
              <label for="fechainicio" class="text-right control-label col-form-label">Número Lote</label>
              <div class="form-group">
                <input type="text" formControlName="Lote" class="form-control form-control-sm"
                  placeholder="Número Lote">
              </div>
            </div>
            <div class="col-md-3">
              <label for="fechainicio" class="text-right control-label col-form-label">Inicio </label>
              <button  type="button" *ngIf="disabledFecha" class="btn btn-success btn-sm side-badge badge badge-success ml-4" (click)="ActivarFecha()" > Activar </button>
              <button  type="button" *ngIf="!disabledFecha" class="btn btn-danger btn-sm side-badge badge badge-danger ml-4" (click)="ActivarFecha()" > Desactivar </button>
              <div class="form-group">
                <input type="date"  formControlName="FechaInicio" class="form-control form-control-sm"
                  placeholder="Fecha Inicio">
              </div>
            </div>
            <div class="col-md-3"> 
              <label for="fechafinal" class="text-right control-label col-form-label">Final</label>
              <div class="form-group">
                <input type="date"   formControlName="FechaFinal" class="form-control form-control-sm"
                  placeholder="Fecha Fin">
              </div>
            </div>
            <div class="col-md-2">
              <label for="btnbuscarGeneral"
                class="col-sm-3 text-right control-label col-form-label text-white">.</label>
              <div class="form-group">
                <button type="submit"  class="btn btn-info btn-sm"> Buscar </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-12">
    
    <form autocomplete="off" [formGroup]="FormControlLotes">
      <div class="card">
        <div class="card-body">
          <div class="d-flex justify-content-end">
            <div class="d-flex">
              <div class="mr-auto">
                  <select class="form-control  form-control-sm" formControlName="NumeroFilas">
                    <option *ngFor="let numero of CantidadVisualizar" [value]="numero">
                      {{numero}}
                    </option>
                  </select>
              </div>
            </div>
          </div>
         
          <div class="table table-hover">
              <table class="table-responsive  table-sm table-cebra table-striped border mt-4 table-info" style="font-size: 12px">
                <thead class="no-wrap">
                  <tr>
                    <th class="text-center sticky" scope="col">Opcion</th>
                    <th class="text-center sticky-2 width-column-header" scope="col">F.Entrega</th>
                    <th class="text-center sticky-3" scope="col">O.Fabricacion</th>
                    <th class="text-center" scope="col">Lote</th>
                    <th class="text-center" scope="col">Protocolo</th>
                    <th class="text-center" scope="col">F.Produccion</th>
                    <th class="text-center" scope="col">F.Expira</th>
                    <th class="text-center" scope="col">Item</th>
                    <th class="text-center" scope="col">Código</th>
                    <th class="text-center width-column" scope="col">Descripción</th>
                    <th class="text-center width-column" scope="col">Cliente</th>
                    <th class="text-center" scope="col">Solicitud</th>
                    <th class="text-center" scope="col">C.Programada</th>
                    <th class="text-center" scope="col">C.Pedida</th>
                    <th class="text-center" scope="col">C.Ingresada</th>
                    <th class="text-center" scope="col">C.Pendiente</th>
                    <th class="text-center" scope="col">Transf</th>
                    <th class="text-center" scope="col">P.Número</th>
                    <th class="text-center" scope="col">Estado</th>
                    <th class="text-center" scope="col">Comentario</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let ControlLoteForm of ListControlLotes.controls; let i = index">
                    <ng-container [formGroup]="ControlLoteForm">
                      <td class="text-center sticky">
                        <a class="cursor-pointer mr-2"
                            (click)="ActualizarFechaEntrega(ControlLoteForm.value)">
                            <i style="font-size: 24px;color: #1475f6;" class="fas fa-save"></i>
                        </a>
                      </td>
                      <td class="text-center sticky-2">
                        <div class="input-group input-group-sm" style='width:7rem'>
                          <input type="date" class="form-control form-control-sm" formControlName="fechaEntrega" />
                        </div>
                      </td>
                      <td class="text-center sticky-3">
                          <b>{{ControlLoteForm.value.ordenFabricacion}}</b>
                      </td>
                      <td class="text-center" [ngStyle]="{'background': ControlLoteForm.value.aprobado=='AP' || ControlLoteForm.value.aprobado=='GE' ? '#77dd77' : 'white' }">
                          <b>{{ControlLoteForm.value.lote}}</b>
                      </td>
                      <td class="text-center" style="width:2% !important;">
                        <i  *ngIf="ControlLoteForm.value.protocoloFlag==0" style="font-size: 24px;color: #ff6961;" class="fas fa-times-circle"></i>
                        <i  *ngIf="ControlLoteForm.value.protocoloFlag>0" style="font-size: 24px;color: #77dd77;" class="fas fa-check-circle"></i>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.fechaProduccion | date:'dd/MM/yyy'}}</b>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.fechaExpiracion | date:'dd/MM/yyy'}}</b>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.item}}</b>
                      </td>
                      <td class="text-center">
                        <b>{{ControlLoteForm.value.numerodeParte}}</b>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.descripcionLocal}}</b>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.busqueda}}</b>
                      </td>
                      <td class="text-center">
                        <b>{{ControlLoteForm.value.referenciaTipo}}</b>
                      </td>
                      <td class="text-center">
                        <b>{{ControlLoteForm.value.cantidadProgramada | number}}</b>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.cantidadPedida | number}}</b>
                      </td>
                      <td class="text-center">
                        <b>{{ControlLoteForm.value.cantidadProducida | number }}</b>
                      </td>
                      <td class="text-center">
                        <b>{{ControlLoteForm.value.cantidadProducida | number}}</b>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.transferidoFlag}}</b>
                      </td>
                      <td class="text-center">
                        <b>{{ControlLoteForm.value.pedidoNumero}}</b>
                      </td>
                      <td class="text-center">
                          <b>{{ControlLoteForm.value.estado}}</b>
                      </td>
                      <td class="text-center">
                        <b>{{ControlLoteForm.value.comentarios}}</b>
                      </td>
                     
                    </ng-container>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="d-flex justify-content-center p-2">
              <ngb-pagination *ngIf="paginador.totalPaginas > 1" [collectionSize]="paginador.totalRegistros"
                [(page)]="page" [pageSize]="pageSize"  [boundaryLinks]="true" (pageChange)="cambioPagina($event)"
                [ellipses]="false" [maxSize]=5 [rotate]="true">
              </ngb-pagination>
            </div>
          </div>
        </div>
    </form>
  </div>
</div>